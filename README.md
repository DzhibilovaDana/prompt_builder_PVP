# Prompt Builder PVP

Веб-приложение на Next.js для сборки «золотых промптов» через визуальный конструктор: пользователь выбирает роль, формат, индустрию, параметры и получает готовый структурированный prompt для LLM.

## Vision и Mission

- **Vision:** сделать качественные промпты повторяемыми и доступными для любой роли в команде, чтобы снизить зависимость от индивидуальной экспертизы.
- **Mission:** дать быстрый и понятный конструктор, который помогает собрать рабочий промпт за минуты, сохранить удачные варианты и стандартизировать практики внутри команды.

## Scope по User Story Map: MVP vs MUP

### MVP (в текущем репозитории)

- Конструктор промптов на главной странице.
- Выбор формата и индустрии из API-конфигов.
- Динамические поля (основные, дополнительные, подопции) для настройки prompt.
- Генерация итогового текста prompt и копирование.
- Локальное избранное для сохранения удачных prompt-вариантов.
- Простая админ-страница для редактирования конфигурации.

### MUP (следующий продуктовый этап)

- Авторизация и командные workspace.
- Хранение prompt-шаблонов и избранного в БД (вместо только localStorage).
- Версионирование шаблонов и аудит изменений.
- Интеграции с LLM API (в т.ч. прямой запуск prompt из UI).
- Метрики качества prompt (оценка, сравнение, A/B).

## Структура репозитория

- `src/app/` — страницы и роутинг Next.js App Router.
- `src/app/api/` — API endpoints (`config`, `formats`, `industries`).
- `src/components/` — UI-компоненты и рендереры полей конструктора.
- `src/hooks/` — клиентская логика состояния и генерации prompt.
- `src/lib/` — типы, константы, утилиты и шаблоны prompt.
- `src/data/` — JSON-конфигурации форматов/настроек.
- `public/` — статические ассеты.
- `.github/workflows/` — CI workflow.
- `db/` *(планируется)* — миграции/инициализация БД.
- `diagrams/` *(планируется)* — архитектурные схемы.
- `scripts/` *(планируется)* — вспомогательные скрипты.


## Требования к окружению

- Node.js **20.x** (рекомендовано для локального запуска и CI).
- npm **10+**.
- Docker (опционально, для контейнерного запуска).

## Быстрый старт

### 1) Установка зависимостей

```bash
npm ci
```

### 2) Запуск локальной разработки

```bash
npm run dev
```

- Приложение доступно на `http://localhost:3000`.
- API роуты доступны по префиксу `http://localhost:3000/api/*`.

### 3) Инициализация БД (когда будет добавлена SQLite/Prisma)

На текущем этапе MVP БД не используется. Для будущего этапа можно зарезервировать команды:

```bash
npm run db:init
# или
npx prisma migrate dev
```

### 4) Основные команды

```bash
npm run lint   # eslint
npm run build  # production build
npm start      # запуск production-сервера
```

## Переменные окружения

На текущем MVP этапе **обязательных переменных окружения нет**.

Для MUP-этапа (интеграции с БД/LLM) рекомендуется заранее предусмотреть:

- `OPENAI_API_KEY` — ключ API модели.
- `DATABASE_URL` — строка подключения к БД.


## Архитектура

Архитектурные диаграммы добавлены в каталог `diagrams/`:

- C4 L1 (Context): `diagrams/c4-context.mmd`
- C4 L2 (Container): `diagrams/c4-container.mmd`
- Deployment: `diagrams/deployment.mmd`

Также добавлен чеклист соответствия критериям: `docs/compliance-checklist.md`.

## Docker

Сборка образа:

```bash
docker build -t prompt-builder .
```

Запуск контейнера:

```bash
docker run --rm -p 3000:3000 prompt-builder
```

После запуска приложение будет доступно на `http://localhost:3000`.

## CI

GitHub Actions workflow: `.github/workflows/ci.yml`.

Pipeline выполняет:

1. `npm ci`
2. `npm run lint`
3. `npm run build`

Цель — гарантировать, что линтер и production-сборка остаются зелёными на каждом push/PR.
